#!/bin/bash
#
# forge-dpu-agent needs lldpcli commands to succeed.
# lldpcli returns switch and port connection mapping.
# The integration tests puts this path, hence this script, on the front of the PATH to ensure they do.
#

echo '{
  "lldp": {
    "interface": {
      "oob_net0": {
        "via": "LLDP",
        "rid": "4",
        "age": "1 day, 03:21:35",
        "chassis": {
          "RNO1-M03-B17-IPMI-01": {
            "id": {
              "type": "mac",
              "value": "0c:29:ef:d9:1c:20"
            },
            "descr": "Cumulus Linux version 4.3.0 running on DELL S3048ON",
            "mgmt-ip": [
              "10.180.253.66",
              "fe80::e29:efff:fed9:1c20"
            ],
            "capability": [
              {
                "type": "Bridge",
                "enabled": true
              },
              {
                "type": "Router",
                "enabled": true
              }
            ]
          }
        },
        "port": {
          "id": {
            "type": "ifname",
            "value": "swp7"
          },
          "descr": "RNO1-M03-B17-CPU-10:B17:15:DPU/BMC",
          "ttl": "120"
        }
      },
      "p0": {
        "via": "LLDP",
        "rid": "4",
        "age": "1 day, 03:21:35",
        "chassis": {
          "RNO1-M03-B17-IPMI-01": {
            "id": {
              "type": "mac",
              "value": "0c:29:ef:d9:1c:21"
            },
            "descr": "Cumulus Linux version 4.3.0 running on DELL S3048ON",
            "mgmt-ip": [
              "10.180.253.67",
              "fe80::e29:efef:fed9:1c20"
            ],
            "capability": [
              {
                "type": "Bridge",
                "enabled": true
              },
              {
                "type": "Router",
                "enabled": true
              }
            ]
          }
        },
        "port": {
          "id": {
            "type": "ifname",
            "value": "swp7"
          },
          "descr": "RNO1-M03-B17-CPU-10:B17:15:DPU/BMC",
          "ttl": "120"
        }
      },
      "p1": {
        "via": "LLDP",
        "rid": "4",
        "age": "1 day, 03:21:35",
        "chassis": {
          "RNO1-M03-B17-IPMI-01": {
            "id": {
              "type": "mac",
              "value": "0c:29:ef:e9:1c:20"
            },
            "descr": "Cumulus Linux version 4.3.0 running on DELL S3048ON",
            "mgmt-ip": [
              "10.180.253.66",
              "fe80::e29:efff:fed0:1c20"
            ],
            "capability": [
              {
                "type": "Bridge",
                "enabled": true
              },
              {
                "type": "Router",
                "enabled": true
              }
            ]
          }
        },
        "port": {
          "id": {
            "type": "ifname",
            "value": "swp7"
          },
          "descr": "RNO1-M03-B17-CPU-10:B17:15:DPU/BMC",
          "ttl": "120"
        }
      }
    }
  }
}'
