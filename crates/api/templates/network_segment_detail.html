{% extends "base.html" %}

{% block title %}Network Segment {{ id }}{% endblock %}

{% block content %}
<div id="json"><a id="json-link" href="">JSON</a></div>
<h1>Network Segment {{ id }}</h1>

<table class="detailsview">
	<tr><th>ID</th><td>{{ id }}</td></tr>
	<tr><th>Name</th><td>{{ name }}</td></tr>
	<tr><th>VPC ID</th><td><a href="/admin/vpc/{{ vpc_id }}">{{ vpc_id }}</a></td></tr>
	<tr><th>Config Version</th><td>{{ version|config_version|safe }}</td></tr>
	<tr><th>Created </th><td>{{ created }}</td></tr>
	<tr><th>Updated</th><td>{{ updated }}</td></tr>
	<tr><th>Deleted</th><td>{{ deleted }}</td></tr>
			<tr><th>State</th><td>
			{% if state.to_lowercase().contains("failed") %}
				<span class="bubble error">{{ state }}{% if time_in_state_above_sla %} ⏱️{% endif %}</span>
			{% else if time_in_state_above_sla %}
				<span class="bubble warning">{{ state }} ⏱️</span>
			{% else if state == "Ready" || state == "Assigned/Ready" %}
				<span class="bubble success">{{ state }}</span>
			{% else %}
				<span class="bubble">{{ state }}</span>
			{% endif %}
		</td></tr>
	<tr><th>State SLA</th><td>{{ state_sla }}</td></tr>
	<tr><th>Time in State is above SLA</th><td>{{ time_in_state_above_sla }}</td></tr>
	<tr><th>State Handler Outcome</th><td>{{ state_reason|controller_state_reason_fmt|safe }}</td></tr>
	<tr><th>Domain id</th><td><a href="/admin/domain">{{ domain_id }}</a></td></tr>
	<tr><th>Domain name</th><td>{{ domain_name }}</td></tr>
	<tr><th>Type</th><td>{{ segment_type }}</td></tr>
</table>

<h3>Prefixes</h3>
{% for prefix in prefixes %}
<table class="detailsview">
	<tr><th>Index</th><td>{{ prefix.index }}</td></tr>
	<tr><th>ID</th><td>{{ prefix.id }}</td></tr>
	<tr><th>Prefix</th><td>{{ prefix.prefix }}</td></tr>
	<tr><th>Gateway</th><td>{{ prefix.gateway }}</td></tr>
	<tr><th>Reserve first</th><td>{{ prefix.reserve_first }}</td></tr>
</table>
{% endfor %}

<h3>History</h3>
<table class="detailsview">
	<thead>
		<tr>
			<th>Version</th>
			<th>State</th>
		</tr>
	</thead>
	<tbody>
	{% for event in history %}
		<tr>
			<td>{{event.version|config_version|safe}}</td>
			<td><div style="overflow: auto;"><pre><code class="prettyjson">{{event.state}}</code></pre></div></td>
		</tr>
	{% endfor %}
	</tbody>
</table>
{% endblock %}
